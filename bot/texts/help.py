from __future__ import annotations


def build_help_text(bot_username: str) -> str:
    deep_link = f"https://t.me/{bot_username}?start=register"
    return (
        "*Помощь по боту*\n\n"
        "*Где взять player_tag*\n"
        "В профиле игрока в игре (вида `#ABC123`).\n\n"
        "*Где получить API token*\n"
        "Откройте профиль игрока → Настройки → *API Token* → Скопировать.\n\n"
        "*Почему регистрация в ЛС*\n"
        "Токен — приватный, его нельзя писать в общий чат.\n"
        f"Если начали в группе — перейдите в ЛС: {deep_link}\n\n"
        "*Что будет после «Регистрация»*\n"
        "Бот запросит тег игрока и токен, проверит владельца и привяжет аккаунт.\n\n"
        "*Если бот пишет «откройте ЛС»*\n"
        "Разрешите сообщения от бота и откройте диалог, затем перейдите по ссылке выше.\n\n"
        "*Как настроить уведомления*\n"
        "Команда /notify или кнопка «Настройки уведомлений». Можно выбрать ЛС или общий чат.\n\n"
        "*Как работают «Цели»*\n"
        "Доступны только в подготовке войны. Нажмите цель — она закрепится за вами.\n"
        "Снять цель может тот же игрок или админ.\n"
    )
